"use strict";!function(){var e=document.querySelector(".js-clip"),t=e.innerHTML;439<t.length&&screen.width<=1023&&(t=t.substr(0,439),e.innerHTML=t+"..")}(),function(){var n=document.querySelectorAll(".footer__button");Array.from(n).forEach(function(o){o.addEventListener("click",function(e){e.preventDefault();var t=o.nextElementSibling;if(!o.classList.contains("js-closed"))return o.classList.add("js-closed"),void t.classList.add("js-hidden");Array.from(n).forEach(function(e){e.classList.contains("js-closed")||(e.classList.add("js-closed"),e.nextElementSibling.classList.add("js-hidden"))}),o.classList.remove("js-closed"),t.classList.remove("js-hidden")})})}(),window.maskPhoneNumper=function(e,t){var n=8,r=37,s=39,a=46,i=e.querySelector(".js-phone"),l=e.querySelector(".form__textarea"),c=function(e){e.preventDefault(),i.value="+7 (",i.removeEventListener("keydown",c),i.removeEventListener("click",c);var o=i.value.length;i.addEventListener("keydown",function(e){0<=e.key&&e.key<=9||e.keyCode===n||e.keyCode===a||e.keyCode===r||e.keyCode===s||e.preventDefault();var t=i.value.length;t<o?o--:(t<5&&(i.value="+7 ("),7===t&&(i.value=i.value+") "),12===t&&(i.value=i.value+"-"),15===t&&(i.value=i.value+"-"),17<t&&e.keyCode!==n&&e.keyCode!==a&&e.keyCode!==r&&e.keyCode!==s&&l.focus(),o++)})};i.addEventListener("keydown",c),i.addEventListener("click",c),t&&(i.removeEventListener("keydown",c),i.removeEventListener("click",c))},function(){function o(e){var t=e.validity;"submit"!==e.type&&"checkbox"!==e.type?t.valueMissing?e.setCustomValidity("Заполните поле"):t.tooShort?e.setCustomValidity("Мало букв"):t.tooLong?e.setCustomValidity("Много букв"):t.patternMismatch?e.setCustomValidity("не подходит по паттерну"):e.setCustomValidity(""):"checkbox"===e.type&&(t.valueMissing?e.setCustomValidity("Согласитесь с правилами обработки данных"):e.setCustomValidity(""))}window.formValidate=function(e,t){Array.from(e.elements).forEach(function(e){t?e.removeEventListener("invalid",o(e)):e.addEventListener("invalid",o(e))})}}(),window.elementInViewport=function(e){for(var t=e.offsetTop,o=e.offsetLeft,n=e.offsetWidth,r=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,o+=e.offsetLeft;return t>=window.pageYOffset&&o>=window.pageXOffset&&t+r<=window.pageYOffset+window.innerHeight&&o+n<=window.pageXOffset+window.innerWidth},window.setLocalStorage=function(e){var t=e.querySelector("[name=name]"),o=e.querySelector("[name=phone]"),n=e.querySelector("[name=message]"),r=!0,s={name:"",phone:"",message:""};try{s.name=localStorage.getItem("nameField"),s.phone=localStorage.getItem("phoneField"),s.message=localStorage.getItem("messageField")}catch(e){r=!1}e.addEventListener("submit",function(){window.formValidate(e,!1),r&&(localStorage.setItem("nameField",t.value),localStorage.setItem("phoneField",o.value),localStorage.setItem("messageField",n.value))}),window.elementInViewport(e)&&(""===s.name&&t.focus(),""!==s.name&&(t.value=s.name,o.focus()),""!==s.phone&&(o.value=s.phone,n.focus()),""!==s.message&&(n.value=s.message),null===s.message&&(n.value=""))},function(){function t(e){e.preventDefault(),o.classList.add("js-popup-show"),document.querySelector("body").classList.add("no-scroll"),n.addEventListener("click",a),r.addEventListener("click",a),document.addEventListener("keydown",i),window.maskPhoneNumper(s,!1),window.setLocalStorage(s)}var e=document.querySelectorAll(".js-popup-open"),o=document.querySelector(".popup"),n=o.querySelector(".popup__close"),r=document.querySelector(".overlay"),s=o.querySelector(".popup__form"),a=function(e){e.preventDefault(),o.classList.remove("js-popup-show"),r.removeEventListener("click",a),document.removeEventListener("keydown",i),window.maskPhoneNumper(s,!0),window.formValidate(s,!0),document.querySelector("body").classList.remove("no-scroll")},i=function(e){27===e.keyCode&&a(e)};e.forEach(function(e){e.addEventListener("click",t)})}(),function(){var e=document.querySelector(".feedback__form");window.maskPhoneNumper(e,!1),window.setLocalStorage(e)}(),document.querySelectorAll(".js-scroll").forEach(function(n){n.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(n.getAttribute("href")).getBoundingClientRect().top,o=setInterval(function(){var e=t/20;e>window.pageYOffset-t&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,t),clearInterval(o))},20)})}),function(){var e=document.querySelector(".footer__credentials"),t=e.querySelector(".footer__bottom-text--company"),o=document.querySelector(".footer__logo");console.log("hey1"),screen.width<=1023&&(e.parentNode.removeChild(t),console.log("hey"),t.insertAdjacentHTML("afterend",o))}();